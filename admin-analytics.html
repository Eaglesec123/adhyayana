<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Adhyayana Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#ffffff;
  --accent:#22c55e;
  --accent2:#6366f1;
}
body.light{
  --bg:#f1f5f9;
  --card:#ffffff;
  --text:#0f172a;
}
body{
  margin:0;
  font-family:Poppins;
  background:linear-gradient(135deg,var(--bg),#0b1220);
  color:var(--text);
  display:flex;
}

/* SIDEBAR */
.sidebar{
  width:260px;
  background:var(--card);
  height:100vh;
  padding:20px;
  position:fixed;
  transition:.3s;
}
.sidebar a{
  display:flex;
  gap:12px;
  padding:12px;
  margin:10px 0;
  text-decoration:none;
  color:var(--text);
  border-radius:10px;
  transition:.3s;
}
.sidebar a:hover{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
}

/* MAIN */
.main{
  flex:1;
  margin-left:260px;
  padding:40px;
}

/* TOPBAR */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:30px;
}

/* STATS */
.stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:25px;
}
.stat-card{
  background:rgba(255,255,255,.05);
  backdrop-filter:blur(15px);
  padding:30px;
  border-radius:22px;
  box-shadow:0 20px 40px rgba(0,0,0,.3);
  transition:.3s;
}
.stat-card:hover{
  transform:translateY(-8px);
}
.stat-number{
  font-size:32px;
  font-weight:700;
  margin-bottom:5px;
}

/* CHART */
.chart-card{
  margin-top:40px;
  background:rgba(255,255,255,.05);
  padding:30px;
  border-radius:22px;
  backdrop-filter:blur(15px);
}

/* COURSE SECTION */
.premium-card{
  background:rgba(255,255,255,.05);
  padding:30px;
  border-radius:22px;
  backdrop-filter:blur(15px);
  box-shadow:0 20px 40px rgba(0,0,0,.3);
}
.course-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:25px;
}
.course-item{
  background:rgba(255,255,255,.06);
  padding:15px;
  border-radius:18px;
  transition:.3s;
}
.course-item:hover{
  transform:scale(1.05);
}
.course-item img{
  width:100%;
  height:140px;
  object-fit:cover;
  border-radius:14px;
}
.upload-form{
  display:grid;
  gap:15px;
}
.upload-form input{
  padding:12px;
  border-radius:10px;
  border:none;
}
.premium-btn{
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(90deg,#22c55e,#16a34a);
  color:white;
  font-weight:600;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="sidebar">
  <a href="#" onclick="showSection('dashboardSection')">üè† Dashboard</a>
  <a href="#" onclick="showSection('coursesSection')">üìö Courses</a>
</div>

<div class="main">

<div id="dashboardSection">

<div class="topbar">
  <h2>Dashboard</h2>
</div>

<div class="stats">
  <div class="stat-card">
    <div class="stat-number" id="totalRevenue">‚Çπ0</div>
    Total Revenue
  </div>
  <div class="stat-card">
    <div class="stat-number" id="teacherRevenue">‚Çπ0</div>
    Earnings
  </div>
  <div class="stat-card">
    <div class="stat-number" id="availableBalance">‚Çπ0</div>
    Available
  </div>
</div>

<div class="chart-card">
  <canvas id="revenueChart"></canvas>
</div>

</div>

<!-- COURSES SECTION -->
<div id="coursesSection" style="display:none; margin-top:20px;">

  <div class="premium-card">
    <h3>üìñ Uploaded Courses</h3>
    <div id="uploadedCourses" class="course-grid"></div>
  </div>

  <div class="premium-card" style="margin-top:30px;">
    <h3>‚¨Ü Upload New Course</h3>
    <div class="upload-form">
      <input type="text" id="courseTitle" placeholder="Course Title">
      <input type="number" id="coursePrice" placeholder="Course Price">
      <input type="text" id="courseImage" placeholder="Thumbnail URL">
      <button onclick="uploadCourse()" class="premium-btn">Upload Course</button>
    </div>
  </div>

</div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getFirestore, collection, query, where, onSnapshot, addDoc }
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = { YOUR_FIREBASE_CONFIG };
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* Section switch */
window.showSection=function(id){
  document.getElementById("dashboardSection").style.display="none";
  document.getElementById("coursesSection").style.display="none";
  document.getElementById(id).style.display="block";
}

/* Upload Course */
window.uploadCourse=async function(){
  const title=document.getElementById("courseTitle").value;
  const price=document.getElementById("coursePrice").value;
  const image=document.getElementById("courseImage").value;
  if(!title||!price) return alert("Fill all fields");

  await addDoc(collection(db,"courses"),{
    title,
    price:Number(price),
    thumbnail:image,
    creatorId:auth.currentUser.uid,
    createdAt:new Date()
  });

  alert("Course Uploaded ‚úÖ");
}

/* Load Uploaded Courses */
onAuthStateChanged(auth,(user)=>{
  if(!user) return;

  const q=query(collection(db,"courses"),where("creatorId","==",user.uid));
  onSnapshot(q,(snap)=>{
    const container=document.getElementById("uploadedCourses");
    container.innerHTML="";
    snap.forEach(doc=>{
      const c=doc.data();
      container.innerHTML+=`
        <div class="course-item">
          <img src="${c.thumbnail||'images/default-course.png'}">
          <h4>${c.title}</h4>
          <p>‚Çπ${c.price}</p>
        </div>
      `;
    });
  });
});

</script>

</body>
</html>
